(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(18),r=n.n(a),l=n(2),o=n(27),i=n(17),s=n(11),c=n(59),u=n(28),p=function(e){return{type:"SET_ACTIVE_COMPONENT",component:e}},m=Object(i.b)({activeComponent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Welcome",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_COMPONENT":return t.component;default:return e}},points:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATASET":return t.points;default:return e}},labels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(arguments.length>1?arguments[1]:void 0).type,e},attributes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATASET":return t.attributes;default:return e}},candidates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CANDIDATES":return t.candidates;default:return e}},mask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATASET":var n={};return t.attributes.forEach(function(e){var t=Object(l.a)(e,2),a=t[0];t[1],n[a]=1}),n;case"TOGGLE_MASK":return Object(c.a)({},e,t.mask);default:return e}},prunedPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESTART":return[];case"PRUNE_POINTS":var n=t.indices.map(function(e){return[e,t.step]});return[].concat(Object(s.a)(n),Object(s.a)(e));default:return e}},leftPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESTART":return[];case"SET_LEFT_POINTS":return t.indices;case"PRUNE_POINTS":return e.filter(function(e){return-1===t.indices.indexOf(e)});default:return e}},numLeftPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LEFT_POINTS":return[t.indices.length];case"PRUNE_POINTS":var n=e[e.length-1];return[].concat(Object(s.a)(e),[n-t.indices.length]);default:return e}},mode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DMM",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE":return t.mode;default:return e}},K:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_K":return t.K;default:return e}},vertices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CONVEX_HULL":return t.vertices;default:return e}}}),d=n(1),h=n.n(d),f=n(26),b=n(3),v=n(6),g=n(7),E=n(4),y=n(8),w=n(9);function x(e){return e.trim().split("\n").slice(1).map(function(e){return e.trim().split(/\s+/).map(function(e){return parseFloat(e)})})}function k(e){return e.trim().split("\n")}var O,N,P,j=function(e){var t=e[0].map(function(e){return{low:e,high:e}});return e.slice(1).forEach(function(e){e.forEach(function(e,n){t[n].low=Math.min(t[n].low,e),t[n].high=Math.max(t[n].high,e)})}),t},S=function(){var e=Object(o.a)(r.a.mark(function e(t,n){var a,l,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.t0=x,e.next=6,a.text();case 6:if(e.t1=e.sent,l=(0,e.t0)(e.t1),void 0!==n){e.next=10;break}return e.abrupt("return",l);case 10:return e.next=12,fetch(n);case 12:return a=e.sent,e.t2=k,e.next=16,a.text();case 16:return e.t3=e.sent,o=(0,e.t2)(e.t3),e.abrupt("return",[l,o]);case 19:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),I=function(e,t,n,a){for(var r,l,o,i=[],s=0;s<e.length&&!(i.length>=a);++s){for(var c=e[s],u=!0,p=0;p<c.length;++p)if(n[p]&&(r=c[p],l=t[p][0],o=t[p][1],!(l<=r&&r<=o))){u=!1;break}u&&i.push(c)}return i},T=function(e){var t=new window.Module.VecVecDouble;return e.forEach(function(e){var n=new window.Module.VectorDouble;e.forEach(function(e){return n.push_back(e)}),t.push_back(n),n.delete()}),t},M=function(e){for(var t=[],n=0;n<e.size();++n){for(var a=e.get(n),r=[],l=0;l<a.size();++l)r.push(a.get(l));t.push(r)}return t},C=function(e){for(var t=[],n=0;n<e.size();++n)t.push(e.get(n));return t},_=function(e){var t=new window.Module.VectorDouble;return e.forEach(function(e){return t.push_back(e)}),t},A=function(e,t){for(var n=[],a=0,r=0;a<e.size()||r<t.size();)r>=t.size()||e.get(a)<t.get(r)?(n.push(e.get(a)),++a):(++a,++r);return n},R=function(e,t){return e.map(function(e,n){if(e<t.at(n))return 0}),1},D=function(e){var t,n,a,r,l=0,o=new Array(e.length);for(t=0;t<e.length;t++){a=0;var i=e.at(t).slice();for(n=0;n<l&&!a;++n)R(e[o[n]],i)&&(a=1);if(!a){for(r=l,l=0,n=0;n<r;n++)R(i,e[o[n]])||(o[l++]=o[n]);o[l++]=t}}return l},V=n(30),L=n.n(V),B=n(61),F=n.n(B),H=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).upload=function(){var e=document.createElement("input");e.type="file",e.accept=".csv,text/plain",e.click(),e.onchange=function(e){console.log(e.path[0].files);var t=new FileReader;t.readAsText(e.path[0].files[0]),t.onload=function(){var e=t.result.trim().split("\n").slice(1),a=e.slice(1).map(function(e){return e.trim().split(/\s+/).map(function(e){return isNaN(parseFloat(e))?0:parseFloat(e)})});console.log(a);var r=j(a);console.log(r);var l=e[0].trim().split(/\s+/).map(function(e,t){var n=r[t];return n.smallerBetter=!1,[e,n]});console.log(l),a.length<5e3?alert("please upload data more then 5000 rows!"):n.props.setDataset(a,"",l)}}},n.handleStart=function(){var e=Object.values(n.props.mask).filter(function(e){return 1===e}).length;if(Object.values(n.props.mask).filter(function(e){return 1===e}).length<2)return alert("You should select at least two properties");for(var t,a=[],r=[],o=0;o<n.props.attributes.length;++o){var i=Object(l.a)(n.props.attributes[o],2),s=i[0],c=i[1],u=[c.low,c.high];if(n.props.mask[s])for(var p=0;p<2;++p){var m=n.inputs[s][p].current.value.trim();if(""!==m){if(isNaN(m))return void alert("".concat(m," in range of ").concat(s," is not an integer"));u[p]=parseFloat(m)}}a.push(u),r.push(n.props.mask[s])}var d=n.inputs.maxPoints.current.value.trim();if(console.log("input number",d),""===d)t=5e3;else{if(!/\d+/.test(d))return t>5e4||t<5e3?alert("Too few valid tuples! Try more attributes, looser ranges, larger Max No. of Tuples or larger datasets!"):void alert("".concat(d," for Maximum items is not an integer"));t=parseInt(d)}if(t>5e4||t<5e3)return alert("The input is out of the range, please input a number between 5000 ~ 50000");if(["Random","Simplex","Parti"].includes(n.props.mode)){if(e<3)return alert("You should select at least two properties");if(e>5)return alert("You should not select more than five properties")}else{var h=parseInt(prompt("Please input an integer more than "+n.props.attributes.length));if(!(/(^[1-9]\d*$)/.test(h)&&h>=n.props.attributes.length))return alert("Illegal number!");n.props.changeK(h)}var f=I(n.props.points,a,r,t);if(0!==f.length){console.log("input points",f);var b=D(f);console.log("input points",b),n.props.startAlgorithm(f)}else alert("No matching Tuples, try larger ranges")},n.handleChange=function(e){if(["graphDP","biSearch","sweepDP"].includes(e.target.value)&&(console.log(n.props.mask),Object.values(n.props.mask).filter(function(e){return 1===e}).length>2))return alert(e.target.value+" only supports 2D data!"),void(e.target.value=n.props.mode);console.log(e.target.value),n.props.changeMode(e.target.value)},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;this.inputs={},this.props.attributes.forEach(function(t){var n=Object(l.a)(t,2),a=n[0];n[1];e.inputs[a]=[h.a.createRef(),h.a.createRef()]}),this.inputs.maxPoints=h.a.createRef();var t=this.props.attributes.map(function(t,n){var a=Object(l.a)(t,2),r=a[0],o=a[1],i=0===e.props.mask[r],s=o.low,c=o.high;return h.a.createElement("tr",{key:r},h.a.createElement("td",{className:"align-middle"},h.a.createElement("span",{onClick:function(){return e.props.toggleMask(r,1-e.props.mask[r])},className:"".concat(e.props.mask[r]?"attribute-select":null),style:{cursor:"pointer",textDecoration:e.props.mask[r]?"":"line-through"}},r)),h.a.createElement("td",null,h.a.createElement("input",{type:"text",className:"form-control",placeholder:s,ref:e.inputs[r][0],disabled:i})),h.a.createElement("td",null,h.a.createElement("input",{type:"text",className:"form-control",placeholder:c,ref:e.inputs[r][1],disabled:i})),h.a.createElement("td",{className:"align-middle hidden"},h.a.createElement("input",{type:"checkbox",checked:i,onChange:function(){return e.props.toggleMask(r,1-e.props.mask[r])}})),h.a.createElement("td",{className:"align-middle",onClick:function(){e.props.attributes[n][1].smallerBetter=!e.props.attributes[n][1].smallerBetter,e.setState({attributes:e.props.attributes})}},e.props.attributes[n][1].smallerBetter?h.a.createElement("span",{style:{background:"#ff8737",padding:"5px",borderRadius:"5px",color:"white"}},"Yes"):h.a.createElement("span",null,"No")))});return t.push(h.a.createElement("tr",{key:"other"},h.a.createElement("td",{className:"align-middle font-weight-bold"},"Max No. of Tuples"),h.a.createElement("td",null,h.a.createElement("input",{type:"text",className:"form-control",placeholder:"5000",ref:this.inputs.maxPoints})),h.a.createElement("td",{style:{textAlign:"left"}},h.a.createElement("label",{className:"mr-4 col-form-label font-weight-bold"},"Mode"),h.a.createElement("div",{className:"mr-3 form-check form-check-inline"},h.a.createElement("div",null,h.a.createElement("select",{onChange:this.handleChange},h.a.createElement("option",{value:"DMM"},"DMM"),h.a.createElement("option",{value:"cube"},"cube"),h.a.createElement("option",{value:"sphere"},"sphere"),h.a.createElement("option",{value:"Simplex"},"Simplex"),h.a.createElement("option",{value:"Random"},"Random"),h.a.createElement("option",{value:"Random"},"Parti"),h.a.createElement("option",{value:"graphDP"},"graphDP"),h.a.createElement("option",{value:"biSearch"},"biSearch"),h.a.createElement("option",{value:"sweepDP"},"sweepDP"),h.a.createElement("option",{value:"IncGreedy"},"IncGreedy"))))))),h.a.createElement("div",{className:"text-center m-auto",style:{maxWidth:"50rem"}},h.a.createElement("img",{alt:"",onClick:function(){return window.location.reload()},src:L.a,style:{width:"50px",position:"absolute",top:"15px",left:"15px",cursor:"pointer"}}),h.a.createElement("div",{type:"button",title:"Format of Input file\r ------------------------------------\r\r The format of the first line is: n d\r n - the number of tuples in the dataset, integer\r d - dimensionality, integer\r The format of the second line is:\r <A1> <A2> ... <Ad>\r Ai - the i-th attribute name, string\r The format of the following n lines is\r <dim 1> <dim 2> ... <dim d>.\r Each line corresponds to a tuple.",className:"btn btn-primary upload",style:{position:"absolute",top:"15px",right:"15px",width:"8rem"},onClick:this.upload},"Upload"),h.a.createElement("img",{alt:"",src:F.a,style:{width:"400px"}}),h.a.createElement("br",null),h.a.createElement("br",null),h.a.createElement("table",{className:"table"},h.a.createElement("thead",null,h.a.createElement("tr",null,h.a.createElement("th",{className:"align-middle"},"Attribute"),h.a.createElement("th",null,"Lower bound"),h.a.createElement("th",null,"Upper bound"),h.a.createElement("th",null,"Smaller better"),h.a.createElement("th",{className:"hidden"},"Discard"))),h.a.createElement("tbody",null,t)),h.a.createElement("div",null,h.a.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"8rem"},onClick:this.handleStart},"Start")))}}]),t}(h.a.Component),G=Object(b.b)(function(e){return{attributes:e.attributes,mask:e.mask,points:e.points,mode:e.mode}},function(e){return{startAlgorithm:function(t){e(function(e){return{type:"SET_CANDIDATES",candidates:e}}(t)),e(p("Interaction"))},toggleMask:function(t,n){return e(function(e,t){return{type:"TOGGLE_MASK",mask:Object(u.a)({},e,t)}}(t,n))},changeMode:function(t){return e(function(e){return{type:"SET_MODE",mode:e}}(t))},changeK:function(t){return e(function(e){return{type:"SET_K",K:e}}(t))},setDataset:function(t,n,a){return e(function(e,t,n){return{type:"SET_DATASET",points:e,labels:t,attributes:n}}(t,n,a))}}})(H),U=n(5),K=function(e){function t(e){var n;if(Object(v.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).next=function(){var e=C(n.runner.getIndices());if(!n.selectedPoint||n.selectedPoint.length!==e.length){n.selectedPoint=e;var t=new Date;n.runner.Next_IncGreedy();var a=new Date;console.log(a-t);var r=n.state.performanceIndex;r.push({x:r.length,y:n.runner.getMrr(),runtime:a-t,mrr:n.runner.getMrr()}),n.setState({performanceIndex:r})}},n.choose=function(e){var t=e+1;n.runner.choose(t);var a=M(window.Module.readConvexHullVertices());console.log("vertices to paint",a),n.props.updateConvexHull(a);var r=n.runner.getCandidatesIndices(),l=A(n.prevIndices,r),o=n.props.numLeftPoints.length;if(n.props.prunePoints(l,o),n.prevIndices.delete(),n.prevIndices=r,r.size()<2)n.stopInteraction();else{var i=n.runner.nextPair();n.setState({pair:C(i)})}},n.stopInteraction=function(){n.prevIndices.delete(),n.runner.delete(),n.props.showResult()},n.inputDimension=function(){var e=prompt("Please input "+n.attributes.length+" dimensions. e.g: one integer value for each attribute. A larger value indicates that the corresponding attribute is more important. e.g.",n.attributes.map(function(e){return Math.floor(10*Math.random())}));if(e){var t=e.trim().split(",").map(function(e){return parseInt(e)});if(t.includes(NaN)||t.length!==n.attributes.length||t.some(function(e){return e<0}))return alert("Illegal number set!");n.runner.globalBest_localBest(_(t)),n.global_local_regret={globalBest:n.props.candidates[n.runner.get_globalBestId()],localBest:n.props.candidates[n.runner.get_localBestId()],regretRatio:n.runner.get_regret_ratio()},n.setState({global_local_regret:n.global_local_regret})}},O=new window.Module.VectorInt,P=new window.Module.VectorInt,n.attributes=[],n.props.attributes.forEach(function(e){var t=Object(l.a)(e,2),a=t[0],r=t[1];console.log(n.props.mask[a]),P.push_back(n.props.mask[a]),n.props.mask[a]&&(O.push_back(r.smallerBetter?1:0),n.attributes.push(a))}),console.log(n.props.candidates),N=T(n.props.candidates),!["Random","Simplex","Parti"].includes(n.props.mode)){var a=new Date;n.runner=new window.Module.SevenAlgorithmRunner(N,O,P,{DMM:4,cube:5,sphere:6,graphDP:7,biSearch:8,sweepDP:9,IncGreedy:10}[n.props.mode],n.props.K);var r=new Date;return n.state={performanceIndex:[{x:0,y:n.runner.getMrr(),runtime:r-a,mrr:n.runner.getMrr()}]},console.log(n.runner),N.delete(),Object(E.a)(n,n.pageResult="NewAlgorithm")}if(n.runner=new window.Module.AlgorithmRunner(N,O,P,{Random:1,Simplex:2,Parti:3}[n.props.mode]),console.log(n.runner),N.delete(),n.prevIndices=n.runner.getCandidatesIndices(),n.props.setLeftPoints(C(n.prevIndices)),n.prevIndices.size()<2)n.state={pair:[]},n.stopInteraction();else{var o=window.Module.readConvexHullVertices(),i=M(o);o.delete(),console.log("create convexhullvertices:",i),n.props.updateConvexHull(i);var s=n.runner.nextPair();n.state={pair:C(s)}}return Object(E.a)(n,n.pageResult="OldAlgorithm")}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;if("OldAlgorithm"===this.pageResult){var t=[h.a.createElement("th",{key:"Option No."},"Option")];this.attributes.forEach(function(e){t.push(h.a.createElement("th",{key:e},e))}),t.push(h.a.createElement("th",{key:"chooseButton"}));var n=this.state.pair.map(function(t,n){var a=[h.a.createElement("td",{key:"Option No."},n+1)];return e.props.candidates[t].forEach(function(t,n){e.props.mask[e.props.attributes[n][0]]&&a.push(h.a.createElement("td",{key:n},t))}),a.push(h.a.createElement("td",{key:"chooseButton"},h.a.createElement("button",{type:"button",className:"btn btn-outline-success btn-sm",onClick:function(){return e.choose(n)}},"Choose"))),h.a.createElement("tr",{key:n,"data-toggle":"tooltip",title:e.props.labels[t]},a)});return h.a.createElement("div",null,h.a.createElement("h2",{style:{background:"gainsboro",borderRadius:"5px",padding:"5px"}},"Your Choice"),h.a.createElement("h4",null,"Q",this.props.numLeftPoints.length,": Choose the Tuple You Favor More among the Following Options"),h.a.createElement("div",{className:"row justify-content-center align-items-center"},h.a.createElement("div",{className:"col-md-8"},h.a.createElement("table",{className:"table table-hover text-center"},h.a.createElement("thead",null,h.a.createElement("tr",null,t)),h.a.createElement("tbody",null,n))),h.a.createElement("div",{className:"col-md-1"},h.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.stopInteraction},"Stop"))))}var a=[h.a.createElement("th",{key:"Option No."},"Option ID")];this.attributes.forEach(function(e){a.push(h.a.createElement("th",{key:e},e))});var r=C(this.runner.getIndices());console.log(r),console.log(this.runner.getMrr());var l=r.slice(-this.props.K).map(function(t,n){var a=[h.a.createElement("td",{key:"Option No."},t)];if(console.log(t),-1!==t)return e.props.candidates[t].forEach(function(t,n){e.props.mask[e.props.attributes[n][0]]&&a.push(h.a.createElement("td",{key:n},t))}),h.a.createElement("tr",{key:n,"data-toggle":"tooltip",title:e.props.attributes[t]},a)});return h.a.createElement("div",null,h.a.createElement("br",null),h.a.createElement("div",{style:{borderRadius:"5px",padding:"5px",fontSize:"22px"}},h.a.createElement("span",{style:{color:"#ff8737"}},this.props.mode)," selects at most k tuples for you"),h.a.createElement("br",null),h.a.createElement("table",{style:{borderBottom:"1px solid gainsboro"},className:"table table-hover text-center"},h.a.createElement("thead",null,h.a.createElement("tr",null,a)),h.a.createElement("tbody",null,l)),h.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"0 10px"}},h.a.createElement("div",null,"Output size: ",r.length),h.a.createElement("div",{onClick:this.inputDimension,style:{background:"#ff8737",color:"white",padding:"5px",borderRadius:"5px"}},"Input D Dimensions")),h.a.createElement("br",null),"IncGreedy"===this.props.mode?h.a.createElement("div",null,h.a.createElement("div",{style:{margin:"auto",width:"30rem",height:"28rem"}},h.a.createElement(U.b,{onMouseLeave:function(){e.setState({hintValue:null})}},h.a.createElement(U.e,{tickValues:this.state.performanceIndex.map(function(e,t){return t}),tickFormat:function(e){return e.toString()},style:{ticks:{fill:"black"}}}),h.a.createElement(U.f,{style:{ticks:{fill:"black"}}}),h.a.createElement(U.a,{text:"Rounds",includeMargin:!1,xPercent:.82,yPercent:1.06,style:{style:{fill:"black"}}}),h.a.createElement(U.a,{text:"MRR(maximun regret ratio)",includeMargin:!1,xPercent:-.01,yPercent:.05,style:{transform:"rotate(-90)",textAnchor:"end",style:{fill:"black"}}}),h.a.createElement(U.d,{color:"#ff8737",onNearestX:function(t,n){var a=n.index;e.setState({hintValue:""+a})},data:this.state.performanceIndex,animation:!0}),this.state.hintValue&&h.a.createElement(U.c,{value:this.state.hintValue},h.a.createElement("p",{style:{color:"black",textAlign:"left"}},"Runtime: ",this.state.performanceIndex[this.state.hintValue].runtime,"ms",h.a.createElement("br",null),"Mrr: ",this.state.performanceIndex[this.state.hintValue].mrr.toFixed(4))))),h.a.createElement("div",{style:{background:"#ff8737",margin:"auto",width:"100px",color:"white",borderRadius:"3.25rem",padding:"5px"},onClick:this.next},"Next")):h.a.createElement("div",{style:{textAlign:"left",padding:"8px",borderRadius:"5px",background:"gainsboro"}},this.props.mode," runtime: ",this.state.performanceIndex[0].runtime," ms  ",h.a.createElement("br",null)," MRR(maximun regret ratio): ",this.state.performanceIndex[0].mrr),h.a.createElement("br",null),this.global_local_regret?h.a.createElement("div",{style:{background:"#ff8737",color:"white",textAlign:"left",borderRadius:"5px",padding:"8px"}},h.a.createElement("div",null,"Your global favorite tuple is:",h.a.createElement("br",null),h.a.createElement("table",{style:{borderBottom:"1px solid gainsboro"},className:"table table-hover text-center"},h.a.createElement("thead",null,h.a.createElement("tr",null,a)),h.a.createElement("tbody",null,function(){var t=[h.a.createElement("td",{key:"Option No."},e.runner.get_globalBestId())];return e.global_local_regret.globalBest.forEach(function(n,a){e.props.mask[e.props.attributes[a][0]]&&t.push(h.a.createElement("td",{key:a},n))}),t}()))),h.a.createElement("div",null,"Your local favorite tuple is:",h.a.createElement("br",null),h.a.createElement("table",{style:{borderBottom:"1px solid gainsboro"},className:"table table-hover text-center"},h.a.createElement("thead",null,h.a.createElement("tr",null,a)),h.a.createElement("tbody",null,function(){var t=[h.a.createElement("td",{key:"Option No."},e.runner.get_localBestId())];return e.global_local_regret.localBest.forEach(function(n,a){e.props.mask[e.props.attributes[a][0]]&&t.push(h.a.createElement("td",{key:a},n))}),t}()))),h.a.createElement("div",null,"Your regret ratio is: ",this.global_local_regret.regretRatio)):"",h.a.createElement("br",null),h.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return window.location.reload()}},"Return to Welcome"),h.a.createElement("br",null))}}]),t}(h.a.Component),W=Object(b.b)(function(e){return{labels:e.labels,candidates:e.candidates,mask:e.mask,attributes:e.attributes,numLeftPoints:e.numLeftPoints,mode:e.mode,K:e.K}},function(e){return{showResult:function(){e(p("Result"))},setLeftPoints:function(t){e(function(e){return{type:"SET_LEFT_POINTS",indices:e}}(t))},prunePoints:function(t,n){e(function(e,t){return{type:"PRUNE_POINTS",indices:e,step:t}}(t,n))},updateConvexHull:function(t){e(function(e){return{type:"UPDATE_CONVEX_HULL",vertices:e}}(t))}}})(K),z=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e)))._onMouseLeave=function(){n.setState({hintValue:null})},n._onNearestX=function(e,t){var a=t.index;n.setState({hintValue:n.props.data[a]})},n.state={hintValue:null},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement("h4",null,"No. of Tuples Left vs. No. of Questions Asked"),h.a.createElement("div",{style:{width:"25rem",height:"25rem"}},h.a.createElement(U.b,{onMouseLeave:this._onMouseLeave},h.a.createElement(U.e,{tickValues:this.props.data.map(function(e,t){return t}),tickFormat:function(e){return e.toString()},style:{ticks:{fill:"black"}}}),h.a.createElement(U.f,{style:{ticks:{fill:"black"}}}),h.a.createElement(U.a,{text:"Question No.",includeMargin:!1,xPercent:.82,yPercent:1.06,style:{style:{fill:"black"}}}),h.a.createElement(U.a,{text:"No. of Tuples Left",includeMargin:!1,xPercent:-.01,yPercent:.05,style:{transform:"rotate(-90)",textAnchor:"end",style:{fill:"black"}}}),h.a.createElement(U.d,{color:"#ff8737",onNearestX:this._onNearestX,data:this.props.data,animation:!0}),this.state.hintValue&&h.a.createElement(U.c,{value:this.state.hintValue},h.a.createElement("p",{style:{color:"black"}},"Q",this.state.hintValue.x,": ",this.state.hintValue.y," Tuples Left")))))}}]),t}(h.a.Component),Y=Object(b.b)(function(e){return{data:e.numLeftPoints.map(function(e,t){return{x:t,y:e}})}})(z),X=n(63),Q=n(41);window.THREE=Q,n(96),n(97),n(98);var q=Q,J=100,$=10,Z=function(e){function t(){var e,a;Object(v.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(a=Object(E.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(o)))).drawGeometry=function(){var e=a.props.vertices.map(function(e){return e});if(e.length<4){if(3!=e.length)return;var t=e.at(0);e.push(t)}var n=e.map(function(e){var t=e.map(function(e){return e*J});return Object(X.a)(q.Vector3,Object(s.a)(t))});console.log(n,"points to paint");var r=new q.ConvexGeometry(n),l=new q.MeshBasicMaterial({color:8900331,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1,opacity:.75,transparent:!0});a.mesh=new q.Mesh(r,l);var o=new q.EdgesGeometry(r),i=new q.LineBasicMaterial({color:0,linewidth:2}),c=new q.LineSegments(o,i);a.mesh.add(c),a.scene.add(a.mesh)},a.addAxes=function(){var e=new q.AxesHelper(1.5*J);a.scene.add(e);var t=n(99),r=new q.Font(t);[[16711680,[J+J/(2*$),0,0],[Math.PI/2,Math.PI,0]],[65280,[0,J-J/(2*$),0],[Math.PI/2,Math.PI/2,0]],[255,[J/($*Math.sqrt(2)),-J/($*Math.sqrt(2)),J],[Math.PI/2,3*Math.PI/4,0]]].forEach(function(e){var t,n,o=Object(l.a)(e,3),i=o[0],c=o[1],u=o[2],p=r.generateShapes("1",J/$),m=new q.ShapeBufferGeometry(p),d=new q.Mesh(m,new q.MeshBasicMaterial({color:i,side:q.DoubleSide}));(t=d.position).set.apply(t,Object(s.a)(c)),(n=d.rotation).set.apply(n,Object(s.a)(u)),a.scene.add(d)}),window.lines=[],[[16711680,[J,0,0],[0,0,0]],[65280,[0,J,0],[0,0,-Math.PI/2]],[255,[0,0,J],[0,0,-Math.PI/2]]].forEach(function(e){var t,n,r=Object(l.a)(e,3),o=r[0],i=r[1],c=r[2],u=new q.LineBasicMaterial({color:o}),p=new q.Geometry;p.vertices.push(new q.Vector3(0,0,0),new q.Vector3(0,J/(2*$)));var m=new q.Line(p,u);(t=m.position).set.apply(t,Object(s.a)(i)),(n=m.rotation).set.apply(n,Object(s.a)(c)),a.scene.add(m),window.lines.push(m)})},a.start=function(){a.frameId||(a.frameId=window.requestAnimationFrame(a.animate))},a.stop=function(){window.cancelAnimationFrame(a.frameId)},a.animate=function(){a.controls.update(),a.renderer.render(a.scene,a.camera),a.frameId=window.requestAnimationFrame(a.animate)},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.mount.clientWidth,t=this.mount.clientHeight;this.scene=new q.Scene,this.camera=new q.PerspectiveCamera(75,e/t,.1,1e3),this.camera.position.set(1.5*J,1.5*J,.5*J),this.camera.up.set(0,0,1),this.controls=new q.OrbitControls(this.camera,this.mount),this.controls.update(),this.renderer=new q.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(16777215),this.renderer.setSize(e,t),this.mount.appendChild(this.renderer.domElement),this.addAxes(),this.drawGeometry(),this.start()}},{key:"componentDidUpdate",value:function(e){this.props.vertices!==e.vertices&&(this.mesh&&(this.scene.remove(this.mesh),this.mesh.geometry.dispose(),this.mesh.material.dispose()),this.drawGeometry())}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"render",value:function(){var e=this;return h.a.createElement("div",{style:{width:"25rem",height:"25rem"},ref:function(t){e.mount=t}})}}]),t}(h.a.Component),ee=n(64),te=n.n(ee),ne=n(43),ae=n(42);function re(e){var t=e.color;return h.a.createElement("div",{style:{width:"100%",height:"2rem",alignItems:"center",display:"flex"}},h.a.createElement("div",{style:{width:"100%",height:"2px",backgroundColor:t}}))}function le(e){var t=e.text;return h.a.createElement("div",{style:{height:"2rem",alignItems:"center",display:"flex",justifyContent:"center"}},t)}var oe=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).attributes=[],n.props.attributes.forEach(function(e){var t=Object(l.a)(e,1)[0];n.props.mask[t]&&n.attributes.push(t)}),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t={dots:!1,infinite:!0,speed:500,slidesToShow:this.attributes.length-1,slidesToScroll:1,vertical:!0,verticalSwiping:!0,arrows:!1,swipeToSlide:!0,afterChange:this.props.changeStartingIndex};return h.a.createElement("div",{title:"Click the arrows to change the selected attributes for displaying the convex hull.",style:{width:"12rem"}},h.a.createElement("div",{style:{alignItems:"center",width:"4rem",display:"inline-block",verticalAlign:"middle"}},h.a.createElement(re,{color:"#ff0000"}),h.a.createElement(re,{color:"#00ff00"}),h.a.createElement(re,{color:"#0000ff"})),h.a.createElement("div",{style:{width:"8rem",display:"inline-block",verticalAlign:"middle"}},h.a.createElement("div",{onClick:function(){return e.slider.slickPrev()},style:{cursor:"pointer"}},h.a.createElement(ne.a,{icon:ae.b})),h.a.createElement(te.a,Object.assign({},t,{ref:function(t){return e.slider=t}}),this.attributes.map(function(e,t){return h.a.createElement(le,{key:t,text:e})})),h.a.createElement("div",{onClick:function(){return e.slider.slickNext()},style:{cursor:"pointer"}},h.a.createElement(ne.a,{icon:ae.a}))))}}]),t}(h.a.Component),ie=Object(b.b)(function(e){return{mask:e.mask,attributes:e.attributes}})(oe),se=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).updateContextHullVertices=function(e){var t=n.props.vertices.map(function(t){for(var n=[],a=0;a<3;++a)n.push(t[(a+e)%4]);return n});n.setState({convexHullVertices:t})},n.changeStartingIndex=function(e){n.setState({index:e}),n.updateContextHullVertices(e)},n.state={index:0,convexHullVertices:e.vertices.map(function(e){return e.slice(0,3)})},n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.vertices!==e.vertices&&this.updateContextHullVertices(this.state.index)}},{key:"render",value:function(){return console.log("vertices",this.state.convexHullVertices),h.a.createElement("div",null,h.a.createElement("h4",null,"Convex Hull of Preference Space"),h.a.createElement(Z,{vertices:this.state.convexHullVertices}),h.a.createElement("div",{style:{position:"absolute",top:"2rem",left:"20rem"}},h.a.createElement(ie,{changeStartingIndex:this.changeStartingIndex})))}}]),t}(h.a.Component),ce=Object(b.b)(function(e){return{vertices:e.vertices}})(se);var ue=function(){return h.a.createElement("div",null,h.a.createElement("h2",{style:{background:"gainsboro",borderRadius:"5px",padding:"5px"}},"Visuals"),h.a.createElement("div",{className:"row justify-content-center"},h.a.createElement("div",{className:"col-6",style:{minWidth:"500px"}},h.a.createElement(Y,null)),h.a.createElement("div",{className:"col-6",style:{minWidth:"500px"}},h.a.createElement(ce,null))))},pe=n(13),me=n.n(pe),de=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(E.a)(this,Object(y.a)(t).call(this,e))).attributes=[],n.props.attributes.forEach(function(e){var t=Object(l.a)(e,2),a=t[0];t[1];n.props.mask[a]&&n.attributes.push(a)}),n}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=[h.a.createElement("th",{key:"Step No."},"Step")];this.attributes.forEach(function(e){t.push(h.a.createElement("th",{key:e},e))});var n=this.props.prunedPoints.map(function(t,n){var a=Object(l.a)(t,2),r=a[0],o=a[1];return h.a.createElement("tr",{key:n,"data-toggle":"tooltip",title:e.props.labels[r]},[h.a.createElement("td",null,o)].concat(e.props.candidates[r].map(function(t,n){if(e.props.mask[e.props.attributes[n][0]])return h.a.createElement("td",{key:n},t)})))}),a=this.props.leftPoints.map(function(t,n){return h.a.createElement("tr",{key:n,"data-toggle":"tooltip",title:e.props.labels[t]},e.props.candidates[t].map(function(t,n){if(e.props.mask[e.props.attributes[n][0]])return h.a.createElement("td",{key:n},t)}))});return h.a.createElement("div",null,h.a.createElement("h2",{style:{background:"gainsboro",borderRadius:"5px",padding:"5px"}},"Statistics"),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col"},h.a.createElement("h4",null,"The No. of Tuples Pruned: ",this.props.prunedPoints.length),h.a.createElement("table",{className:me()("table","table-hover",{"table-fixed":n.length>7}),style:{minWidth:"37rem"}},h.a.createElement("thead",null,h.a.createElement("tr",null,t)),h.a.createElement("tbody",null,n))),h.a.createElement("div",{className:"col"},h.a.createElement("h4",null,"The No. of Tuples Left in the Database:"," ",this.props.leftPoints.length),h.a.createElement("table",{className:me()("table","table-hover",{"table-fixed":a.length>7}),style:{minWidth:"30rem"}},h.a.createElement("thead",null,h.a.createElement("tr",null,t.slice(1))),h.a.createElement("tbody",null,a)))))}}]),t}(h.a.Component),he=Object(b.b)(function(e){return{labels:e.labels,candidates:e.candidates,prunedPoints:e.prunedPoints,leftPoints:e.leftPoints,attributes:e.attributes,mask:e.mask}})(de);var fe=Object(b.b)(function(e){return{mode:e.mode}})(function(e){var t=e.mode;return["Random","Simplex","Parti"].includes(t)?h.a.createElement("div",null,h.a.createElement(W,null),h.a.createElement(ue,null),h.a.createElement(he,null)):h.a.createElement("div",null,h.a.createElement("img",{alt:"",onClick:function(){return window.location.reload()},src:L.a,style:{width:"50px",position:"absolute",top:"15px",left:"15px",cursor:"pointer"}}),h.a.createElement(W,null))});var be=Object(b.b)(function(e){return{labels:e.labels,candidates:e.candidates,leftPoints:e.leftPoints,attributes:e.attributes,mask:e.mask,numLeftPoints:e.numLeftPoints}},function(e){return{restart:function(){e(p("Welcome")),e({type:"RESTART"})}}})(function(e){var t=e.labels,n=e.candidates,a=e.leftPoints,r=e.attributes,o=e.mask,i=e.numLeftPoints,s=e.restart,c=[];r.forEach(function(e){var t=Object(l.a)(e,2),n=t[0];if(t[1],o[n]){var a=h.a.createElement("th",{key:n},n);c.push(a)}});var u=a.map(function(e,a){return h.a.createElement("tr",{key:a,"data-toggle":"tooltip",title:t[e]},n[e].map(function(e,t){if(o[r[t][0]])return h.a.createElement("td",{key:t},e)}))});return h.a.createElement("div",{className:"justify-content-center"},h.a.createElement("h4",null,"The Total No. of Questions Asked is: ",i.length-1,"."),h.a.createElement("h4",null,1===a.length?"Your Favourite Tuple is:":"".concat(a.length," Tuples Left in the Database:")),h.a.createElement("table",{className:me()("table","table-hover",{"table-fixed":u.length>7}),style:{maxWidth:"40rem",margin:"auto"}},h.a.createElement("thead",null,h.a.createElement("tr",null,c)),h.a.createElement("tbody",null,u)),h.a.createElement("div",{className:"d-flex justify-content-center my-3"},h.a.createElement(Y,null)),h.a.createElement("div",null,h.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:s},"Return to Welcome")))});var ve=Object(b.b)(function(e){return{activeComponent:e.activeComponent}})(function(e){switch(e.activeComponent){case"Welcome":return h.a.createElement(G,null);case"Interaction":return h.a.createElement(fe,null);case"Result":return h.a.createElement(be,null);default:return h.a.createElement("div",null)}});window.Module={onRuntimeInitialized:function(){var e=Object(o.a)(r.a.mark(function e(){var t,n,a,o,s,c,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("./datasets/cars.txt","./datasets/labelsOfCars.txt");case 2:t=e.sent,n=Object(l.a)(t,2),a=n[0],o=n[1],c={},(s=[["Price (USD)",{low:1e3,high:5e4,smallerBetter:!0}],["Year",{low:2001,high:2017,smallerBetter:!1}],["Power (HP)",{low:50,high:400,smallerBetter:!1}],["Used KM",{low:1e4,high:15e4,smallerBetter:!0}]]).forEach(function(e,t){var n=Object(l.a)(e,2),a=n[0];n[1];c[a]=1}),console.log(c),u=Object(i.c)(m,{points:a,labels:o,attributes:s,mask:c}),Object(f.render)(h.a.createElement(b.a,{store:u},h.a.createElement(ve,null)),document.getElementById("root"));case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()};var ge=document.createElement("script");ge.src="web.js",ge.async=!0,document.body.appendChild(ge)},30:function(e,t,n){e.exports=n.p+"static/media/logo-black.4a289cfe.png"},61:function(e,t,n){e.exports=n.p+"static/media/favorite.39847071.png"},67:function(e,t,n){e.exports=n(115)}},[[67,2,1]]]);
//# sourceMappingURL=main.62d8114f.chunk.js.map